<br>
<div nz-row>
  <div nz-col nzSpan="8" class="btnGroup">
    <button nz-button nzType="primary" (click)="showModal()">Créer une évaluation</button>
  </div>
</div>

<!-- <nz-table nzBordered [nzData]="evaluations">
    <thead>
        <tr>
            <th nzWidth="10%">Désignation</th>
            <th nzWidth="10%">Enseignant</th>
            <th nzWidth="10%">Formation</th>
            <th nzWidth="10%">Promotion</th>
            <th nzWidth="10%">Etat</th>
            <th nzWidth="10%">Début de réponse</th>
            <th nzWidth="10%">Fin de réponse</th>
            <th nzWidth="10%">Unité d'enseignement</th>
            <th nzWidth="10%">Element constitutif</th>
            <th nzWidth="10%">Action</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let data of evaluations">
            <td>{{ data.designation }}</td>
            <td>{{ data.enseignantt.prenom }} {{ data.enseignantt.nom }} </td>
            <td>{{ data.promotionn.formationn.codeFormation }}</td>
            <td>{{ data.promotionn.id.anneeUniversitaire }}</td>
            <td>{{data.etat}}</td>
            <td>{{ data.debutReponse }}</td>
            <td>{{ data.finReponse }}</td>
            <td>{{ data.uniteEnseignementt.id.codeUe }}</td>
            <td *ngIf="data.elementConstitutiff">{{ data.elementConstitutiff.id.codeEc }}</td>
            <td *ngIf="!data.elementConstitutiff"> -- </td>
            <td><i nz-icon nzType="eye" nzTheme="outline"></i> | <i nz-icon nzType="edit" nzTheme="outline"></i> | <i nz-icon nzType="delete" nzTheme="outline"></i></td>

        </tr>
    </tbody>
</nz-table> -->

<mat-progress-spinner *ngIf="!isLoaded" class="spinner" color="primary" [mode]="mode">
</mat-progress-spinner>

<div [hidden]="!isLoaded" class="mat-elevation-z8">
  <table mat-table [dataSource]="dataSource">

    <!-- Intitule Column -->
    <ng-container matColumnDef="designation">
      <th mat-header-cell *matHeaderCellDef> Désignation </th>
      <td mat-cell *matCellDef="let element; let index=index">
        <span>{{element.designation}}</span>
      </td>
    </ng-container>

    <!-- Intitule Column -->
    <ng-container matColumnDef="enseignant">
      <th mat-header-cell *matHeaderCellDef> Enseignant </th>
      <td mat-cell *matCellDef="let element; let index=index">
        <span>{{element.enseignantt.prenom}} {{element.enseignantt.nom}}</span>
      </td>
    </ng-container>

    <!-- Intitule Column -->
    <ng-container matColumnDef="formation">
      <th mat-header-cell *matHeaderCellDef> Formation </th>
      <td mat-cell *matCellDef="let element; let index=index">
        <span>{{element.promotionn.formationn.codeFormation}}</span>
      </td>
    </ng-container>

    <!-- Intitule Column -->
    <ng-container matColumnDef="promotion">
      <th mat-header-cell *matHeaderCellDef> Promotion </th>
      <td mat-cell *matCellDef="let element; let index=index">
        <span>{{element.promotionn.id.anneeUniversitaire}}</span>
      </td>
    </ng-container>


    <!-- Intitule Column -->
    <ng-container matColumnDef="etat">
      <th mat-header-cell *matHeaderCellDef> Etat </th>
      <td mat-cell *matCellDef="let element; let index=index">
        <span>{{element.etat}}</span>
      </td>
    </ng-container>

    <!-- Intitule Column -->
    <ng-container matColumnDef="debReponse">
      <th mat-header-cell *matHeaderCellDef> Intitulé </th>
      <td mat-cell *matCellDef="let element; let index=index">
        <span>{{element.debutReponse}}</span>
      </td>
    </ng-container>

    <!-- Intitule Column -->
    <ng-container matColumnDef="finReponse">
      <th mat-header-cell *matHeaderCellDef> Fin de réponse </th>
      <td mat-cell *matCellDef="let element; let index=index">
        <span>{{element.finReponse}}</span>
      </td>
    </ng-container>


    <!-- Intitule Column -->
    <ng-container matColumnDef="uEns">
      <th mat-header-cell *matHeaderCellDef> Unité d'enseignement </th>
      <td mat-cell *matCellDef="let element; let index=index">
        <span>{{element.uniteEnseignementt.id.codeUe}}</span>
      </td>
    </ng-container>

    <!-- Intitule Column -->
    <ng-container matColumnDef="uConst">
      <th mat-header-cell *matHeaderCellDef> Element constitutif </th>
      <td mat-cell *matCellDef="let element; let index=index">
        <span *ngIf="element.elementConstitutiff">{{element.elementConstitutiff.id.codeEc }}</span>
        <span *ngIf="!element.elementConstitutiff">-</span>
      </td>
    </ng-container>


    <!-- Action Column -->
    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef> </th>
      <td mat-cell *matCellDef="let element; let index=index">
        <button nz-popconfirm nzPopconfirmTitle="Voulez vraiment valider cet enregistrement?" (nzOnConfirm)="confirm()" (nzOnCancel)="cancel()" nzPopconfirmPlacement="top" mat-icon-button aria-label="Valider" color="primary">
          <mat-icon>create</mat-icon>
        </button>

        <button nz-popconfirm nzPopconfirmTitle="Voulez vraiment supprimer cet enregistrement?" (nzOnConfirm)="cancel()" (nzOnCancel)="cancel()" nzPopconfirmPlacement="top" class="dltBtn" mat-icon-button aria-label="Supprimer"
          color="warn">
          <mat-icon>delete</mat-icon>
        </button>

      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
  <mat-paginator onload="changeDataSource()" [pageSizeOptions]="[8]"></mat-paginator>
</div>

<nz-modal nzWidth="60%" nzTitle="Ajouter une évaluation" [(nzVisible)]="isVisible" (nzOnCancel)="hideModal()" [nzFooter]="null">
  <app-ajouter></app-ajouter>
</nz-modal>
